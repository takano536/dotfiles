/*------------------------- Edge-Frfox - colors.css -------------------------*/

/*
  MARK: Default colours
*/
:root:not([lwtheme]),
/* `--newtab-background-color-secondary used` to differentiate between a dark
 * private window and private window with the 'Dark' theme enabled.
 * May not be the most reliable method, but works for now up to FF 123. */
:root[privatebrowsingmode="temporary"]:where([style*="--lwt-accent-color: rgb(28, 27, 34)"]:not([style*="--newtab-background-color-secondary: rgb(66, 65, 77)"])) {
  /* Toolbars */
  --lwt-accent-color: light-dark(#cecece, #1C1C1C) !important;
  --lwt-accent-color-inactive: light-dark(#e8e8e8, #2e2e2e) !important;
  --lwt-text-color: light-dark(#000, #FFF) !important;
  --lwt-text-color-inactive: light-dark(#3A3A3A, #CBCBCB) !important;
  --tab-selected-textcolor: light-dark(#000, #fff) !important;
  --tab-selected-textcolor-inactive: light-dark(#3E3E3E, #CBCBCB) !important;
  --tab-selected-bgcolor: var(--toolbar-bgcolor) !important;
  --tab-attention-icon-color: light-dark(#0078D4, #93d0ff) !important;
  --toolbar-bgcolor: light-dark(#f7f7f7, #3B3B3B) !important;
  --toolbar-non-lwt-bgcolor: var(--toolbar-bgcolor) !important;
  --toolbar-color: light-dark(#000, #fff) !important;
  --toolbarbutton-icon-fill: var(--toolbar-color) !important;
  --toolbarbutton-icon-fill-attention: light-dark(#0078D4, #4C98D1) !important;
  --toolbarseparator-color: color-mix(in srgb, currentColor 25%, transparent) !important;
  --chrome-content-separator-color: light-dark(#bfbfbf, #686868) !important;
  --newtab-background-color: light-dark(#f7f7f7, #252525) !important;
  --tabpanel-background-color: var(--newtab-background-color, var(--toolbar-bgcolor, transparent)) !important;
  /* Toolbar button overlays */
  --toolbarbutton-hover-background: color-mix(in srgb, currentColor 8%, transparent) !important;
  --toolbarbutton-active-background: color-mix(in srgb, currentColor 13.5%, transparent) !important;
  /* Tab audio indicator overlay icon */
  --tab-icon-overlay-fill: var(--toolbar-color) !important;
  --tab-icon-overlay-stroke: var(--toolbar-bgcolor) !important;
  /* URL bar */
  --toolbar-field-background-color: light-dark(#fff, #2B2B2B) !important;
  --toolbar-field-color: light-dark(#000, #fff) !important;
  --toolbar-field-border-color: transparent !important;
  --toolbar-field-focus-background-color: var(--toolbar-field-background-color) !important;
  --toolbar-field-focus-color: var(--toolbar-field-color) !important;
  --toolbar-field-focus-border-color: light-dark(#0055D780, #63ADE5) !important;
  --urlbar-icon-fill-opacity: 0.58 !important;
  --urlbar-box-bgcolor: light-dark(rgb(0 0 0 / .09), rgb(255 255 255 / .11)) !important;
  --urlbar-box-hover-bgcolor: light-dark(rgb(0 0 0 / .09), rgb(255 255 255 / .11)) !important;
  --urlbar-box-active-bgcolor: light-dark(rgb(0 0 0 / .22), rgb(255 255 255 / .28)) !important;
  --urlbar-box-focus-bgcolor: var(--urlbar-box-hover-bgcolor) !important;
  /* URL bar suggestions */
  --link-color: light-dark(#0078D4, #75B6E8) !important;
  --uc-urlbarView-accent-color: light-dark(#1A6397, #75B6E8) !important;
  --urlbarView-highlight-background: light-dark(#F2F2F2, #383838) !important;
  --urlbarView-highlight-color: light-dark(#000, #fff) !important;
  --urlbarView-hover-background: light-dark(#e5e5e5, #444444) !important;
  --urlbarView-separator-color: light-dark(#EFEFEF, #5F5F5F) !important;
  /* Menus/panels */
  --arrowpanel-background: light-dark(#fff, #4A4A4A) !important;
  --arrowpanel-color: light-dark(#1c1c1c, #fff) !important;
  --arrowpanel-border-color: light-dark(#fff, #636363) !important;
  --arrowpanel-dimmed: light-dark(#565656, #565656) !important;
  --arrowpanel-dimmed-further: light-dark(#707070, #707070) !important;
  --panel-separator-color: light-dark(#dadada, #636363) !important;
  --panel-description-color: light-dark(#000a, #fffb) !important;
  --panel-disabled-color: light-dark(#9E9E9E, #B9B9B9) !important;
  --panel-item-hover-bgcolor: light-dark(#eee, #646464) !important;
  --panel-item-active-bgcolor: light-dark(#ddd, #747474) !important;
  --panel-banner-item-update-supported-bgcolor: light-dark(#188038, #81C995) !important;
  /* Primary button */
  --button-primary-bgcolor: light-dark(#0078D4, #006CBE) !important;
  --button-primary-color: light-dark(#fff, #fff) !important;
  --button-primary-hover-bgcolor: light-dark(#006BBD, #1C7CC5) !important;
  --button-primary-active-bgcolor: light-dark(#0060AA, #3289CB) !important;
  /* Secondary button */
  --button-bgcolor: light-dark(#EFEFEF, #5C5C5C) !important;
  --button-color: light-dark(#000, #fff) !important;
  --button-hover-bgcolor: light-dark(#D5D5D5, #6E6E6E) !important;
  --button-active-bgcolor: light-dark(#C0C0C0, #7C7C7C) !important;
  /* Text input field, e.g. bookmarks editor */
  --focus-outline-color: light-dark(#0055D780, #63ADE5) !important;
  --input-bgcolor: light-dark(#fff, #4A4A4A) !important;
  --input-color: light-dark(#2b2b2b, #fff) !important;
  --input-border-color: light-dark(#bebebe, #808080) !important;
  --error-text-color: light-dark(#FF9AA2, #FF9AA2) !important;
  --input-error-border-color: light-dark(#FF848A, #FF848A) !important;
  /* Side bar colours. */
  --sidebar-background-color: light-dark(#f7f7f7, #3b3b3b) !important;
  --sidebar-text-color: light-dark(#000, #fff) !important;
  --sidebar-border-color: light-dark(#bfbfbf, #686868) !important;

  /* ::::: Dialog theme ::::: */
  & #window-modal-dialog::backdrop {
    /* Overlay when dialog is shown. */
    background-color: rgb(20 20 20 / .2) !important;
  }

  &[dialogroot] {
    /* Dialog */
    --in-content-page-background: var(--arrowpanel-background) !important;
    --in-content-page-color: var(--arrowpanel-color) !important;
    /* Primary button */
    --in-content-primary-button-text-color: var(--button-primary-color) !important;
    --in-content-primary-button-background: var(--button-primary-bgcolor) !important;
    --in-content-primary-button-background-hover: var(--button-primary-hover-bgcolor) !important;
    --in-content-primary-button-background-active: var(--button-primary-active-bgcolor) !important;
    /* Secondary button */
    --in-content-button-text-color: var(--button-color) !important;
    --in-content-button-background: var(--button-bgcolor) !important;
    --in-content-button-background-hover: var(--button-hover-bgcolor) !important;
    --in-content-button-background-active: var(--button-active-bgcolor) !important;
    /* Text input */
    --in-content-box-background: var(--input-bgcolor) !important;
    --in-content-box-border-color: var(--input-border-color) !important;
  }

  accent-color: var(--button-primary-bgcolor) !important;
}

/* Ensure that dark mode is enabled completely in private browsing mode. */
@media (-moz-bool-pref: "browser.theme.dark-private-windows") {

  :root[privatebrowsingmode="temporary"],
  :root[privatebrowsingmode="temporary"] #nav-bar,
  :root[privatebrowsingmode="temporary"] #PersonalToolbar {
    --toolbar-color-scheme: dark !important;
    --tab-selected-color-scheme: dark !important;
    color-scheme: dark !important;
  }
}

/* Apply colours to the default 'Auto' theme. */
:root:not([lwtheme]) #navigator-toolbox {
  background-color: var(--lwt-accent-color) !important;
  color: var(--lwt-text-color) !important;

  /* Inactive window background colours. */
  &:-moz-window-inactive {
    background-color: var(--lwt-accent-color-inactive, var(--lwt-accent-color)) !important;
    color: var(--lwt-text-color-inactive, var(--lwt-text-color)) !important;
  }
}

/* Make sure that the tab toolbar opacity is always 1, inactive window colours
 * are already supplied by this theme. */
:root[tabsintitlebar] #titlebar:-moz-window-inactive {
  opacity: 1 !important;
}

/* Make the titlebar buttons black/white on default themes */
:root:not([lwtheme])[tabsintitlebar] .titlebar-buttonbox {
  color: var(--lwt-text-color) !important;
}

/* Status/link preview panel */
#statuspanel-label {
  background-color: var(--toolbar-field-focus-background-color) !important;
  color: var(--toolbar-field-focus-color) !important;
  border-color: transparent !important;
  box-shadow: 0 2px 5px #0002, 0 0 0 1px light-dark(#0001, #0002) !important;
  border-radius: 0 4px 0 0 !important;

  #statuspanel[mirror] & {
    border-radius: 4px 0 0 0 !important;
  }
}

/*
  MARK: Windows
*/
@media (-moz-platform: windows) {

  /* Colour the text selection background and foreground. */
  ::selection {
    background-color: light-dark(#0078D4, #93B8E7) !important;
    color: light-dark(#fff, #000) !important;
  }

  tooltip {
    background-color: var(--arrowpanel-background) !important;
    color: var(--arrowpanel-color) !important;
    border-color: var(--arrowpanel-border-color) !important;
  }

  /* Use accent colour in titlebar when Windows option is enabled. */
  @media (-moz-windows-accent-color-in-titlebar) and (-moz-bool-pref: "browser.theme.windows.accent-color-in-tabs.enabled") {

    /* Uses :root:root to beat specificity of floating tabs adjustments. */
    :root:root:not([lwtheme]) {
      --lwt-accent-color: ActiveCaption !important;
      --lwt-text-color: CaptionText !important;
      --lwt-accent-color-inactive: InActiveCaption !important;
      --lwt-text-color-inactive: InActiveCaptionText !important;
    }
  }

  .titlebar-button:not(.titlebar-close):hover {
    background-color: color-mix(in srgb, currentColor 11%, transparent) !important;

    &:active {
      background-color: color-mix(in srgb, currentColor 20%, transparent) !important;
    }
  }

  .titlebar-close:hover {
    stroke: white !important;
    background-color: #e81123 !important;

    &:active {
      background-color: #DC5C66 !important;
    }

    toolbar[brighttext] &:active {
      background-color: #971821 !important;
    }
  }

  /* Library window colour theme. */
  window#places {
    --organizer-color: light-dark(#000, #fff) !important;
    --organizer-deemphasized-color: light-dark(#666, #bbb) !important;
    --organizer-toolbar-background: light-dark(#f7f7f7, #3B3B3B) !important;
    --organizer-pane-background: light-dark(#f7f7f7, #2B2B2B) !important;
    --organizer-content-background: light-dark(#f7f7f7, #1C1C1C) !important;
    --organizer-hover-background: light-dark(#00000025, #ffffff25) !important;
    --organizer-selected-background: light-dark(#006CBE80, #006CBE80) !important;
    --organizer-outline-color: light-dark(#0055D7a0, #63ADE5) !important;
    --organizer-toolbar-field-background: light-dark(#fff, #2B2B2B) !important;
    --organizer-toolbar-field-background-focused: light-dark(#fff, #2B2B2B) !important;
    --organizer-border-color: light-dark(#bfbfbf, #686868) !important;
    scrollbar-color:
      light-dark(#0006, #fff6) light-dark(#f7f7f740, #2B2B2B40) !important;
  }

  #placesViewsBox #downloadsListBox richlistitem[selected="true"] {
    background-color: light-dark(#006CBE, #006CBE) !important;
    color: light-dark(#fff, #fff) !important;
  }

  #placeContentColumns :is(treecol, treecolpicker) {
    background-color: light-dark(#f7f7f7, #3B3B3B) !important;
    color: light-dark(#000, #fff) !important;
    border-inline-start: 1px solid light-dark(#bfbfbf, #686868) !important;
    box-shadow: inset 0 -1px light-dark(#bfbfbf, #686868) !important;
    appearance: none !important;
  }

  #placeContentColumns :is(treecol, treecolpicker):where(:hover) {
    background-color: light-dark(#cecece, #4A4A4A) !important;
    color: light-dark(#000, #fff) !important;
  }
}

/* Prevent macOS vibrancy appearance, instead using a solid background. */
#sidebar-box {
  appearance: none !important;
}

.sidebar-panel:not([lwt-sidebar]) {
  color: light-dark(#000, #fff) !important;
  scrollbar-color: light-dark(#0006, #fff6) light-dark(#f7f7f740, #3b3b3b40) !important;

  /* Sidebar search box (Windows) */
  @media(-moz-platform: windows) {

    & #sidebar-search-container>#search-box,
    & #viewButton {
      appearance: none !important;
      background-color: var(--toolbar-field-background-color) !important;
      color: inherit !important;
      border: 1px solid var(--input-border-color) !important;
      border-radius: 4px !important;
      padding: 6px 8px !important;

      &:focus {
        outline: 2px solid var(--input-border-color) !important;
        outline-offset: -2px !important;
        border-color: transparent !important;
      }
    }
  }
}

@-moz-document url(chrome://browser/content/syncedtabs/sidebar.xhtml) {
  body {
    background: transparent !important;
  }
}

/*
  MARK: Linux / GTK csd
*/
@media (-moz-gtk-csd-available) {

  :root:not([lwtheme]),
  /* `--newtab-background-color-secondary used` to differentiate between a dark
   * private window and private window with the 'Dark' theme enabled.
   * May not be the most reliable method, but works for now up to FF 123. */
  :root[privatebrowsingmode="temporary"]:where([style*="--lwt-accent-color: rgb(28, 27, 34)"]: not([style*="--newtab-background-color-secondary: rgb(66, 65, 77)"])) {
    /* Used for mixing colours differently in light/dark themes. */
    --uc-tint: light-dark(black, white);
    /* Colour adjusted for readability. */
    --uc-accent-adjusted: light-dark(color-mix(in oklch, AccentColor 92%, black),
      color-mix(in oklch, AccentColor 60%, white));
    /* Toolbars */
    --lwt-accent-color: light-dark(color-mix(in srgb, ActiveCaption 90%, black), ActiveCaption) !important;
    --lwt-accent-color-inactive: light-dark(color-mix(in srgb, InactiveCaption 94%, black), InactiveCaption) !important;
    --lwt-text-color: CaptionText !important;
    --lwt-text-color-inactive: color-mix(in srgb, CaptionText 65%, transparent) !important;
    --tab-selected-textcolor: var(--toolbar-color) !important;
    --tab-selected-textcolor-inactive: color-mix(in srgb, var(--toolbar-color) 65%, transparent) !important;
    --tab-selected-bgcolor: var(--toolbar-bgcolor) !important;
    --tab-attention-icon-color: var(--uc-accent-adjusted) !important;
    --toolbar-bgcolor: light-dark(-moz-dialog, color-mix(in srgb, -moz-dialog 92%, white)) !important;
    --toolbar-color: -moz-dialogtext !important;
    --toolbarbutton-icon-fill-attention: var(--uc-accent-adjusted) !important;
    --chrome-content-separator-color: color-mix(in srgb, currentColor 17%, var(--toolbar-bgcolor)) !important;
    --newtab-background-color: light-dark(-moz-dialog, color-mix(in srgb, -moz-dialog 82%, black)) !important;
    /* URL bar */
    --toolbar-field-background-color: light-dark(Field, color-mix(in srgb, Field 96%, -moz-dialogtext)) !important;
    --toolbar-field-color: FieldText !important;
    --toolbar-field-focus-border-color: light-dark(color-mix(in srgb, var(--focus-outline-color) 50%, transparent), var(--focus-outline-color)) !important;
    --urlbar-box-bgcolor: var(--button-bgcolor) !important;
    --urlbar-box-hover-bgcolor: var(--button-hover-bgcolor) !important;
    --urlbar-box-active-bgcolor: var(--button-active-bgcolor) !important;
    /* URL bar suggestions. */
    --link-color: var(--uc-accent-adjusted) !important;
    --uc-urlbarView-accent-color: var(--uc-accent-adjusted) !important;
    --urlbarView-highlight-background: var(--panel-item-hover-bgcolor) !important;
    --urlbarView-highlight-color: var(--toolbar-field-color) !important;
    --urlbarView-hover-background: var(--panel-item-active-bgcolor) !important;
    --urlbarView-separator-color: var(--panel-separator-color) !important;
    /* Menus/panels */
    --arrowpanel-background: Field !important;
    --arrowpanel-color: FieldText !important;
    --arrowpanel-border-color: light-dark(transparent, var(--panel-separator-color)) !important;
    --arrowpanel-dimmed: color-mix(in srgb, currentColor 17%, transparent) !important;
    --arrowpanel-dimmed-further: color-mix(in srgb, currentColor 30%, transparent) !important;
    --panel-separator-color: color-mix(in srgb, currentColor 17%, var(--arrowpanel-background)) !important;
    --panel-description-color: GrayText !important;
    --panel-disabled-color: GrayText !important;
    --panel-item-hover-bgcolor: color-mix(in srgb, currentColor 8%, transparent) !important;
    --panel-item-active-bgcolor: color-mix(in srgb, currentColor 13%, transparent) !important;
    /* Primary button */
    --button-primary-bgcolor: AccentColor !important;
    --button-primary-color: AccentColorText !important;
    --button-primary-hover-bgcolor: color-mix(in srgb, var(--uc-tint) 10%, var(--button-primary-bgcolor)) !important;
    --button-primary-active-bgcolor: color-mix(in srgb, var(--uc-tint) 20%, var(--button-primary-bgcolor)) !important;
    /* Secondary button */
    --button-bgcolor: color-mix(in srgb, currentColor 10%, transparent) !important;
    --button-color: currentColor !important;
    --button-hover-bgcolor: color-mix(in srgb, currentColor 14%, transparent) !important;
    --button-active-bgcolor: color-mix(in srgb, currentColor 20%, transparent) !important;
    /* Text input field, e.g. bookmarks editor. */
    --focus-outline-color: var(--uc-accent-adjusted) !important;
    --input-bgcolor: var(--arrowpanel-background) !important;
    --input-color: var(--arrowpanel-color) !important;
    --input-border-color: color-mix(in srgb, currentColor 35%, var(--arrowpanel-background)) !important;
    /* Sidebar */
    --sidebar-background-color: var(--toolbar-bgcolor) !important;
    --sidebar-text-color: var(--toolbar-color) !important;
    --sidebar-border-color: var(--chrome-content-separator-color) !important;
  }

  /* Use the same sidebar splitter style as other platforms. */
  .sidebar-splitter {
    border: 0 solid var(--sidebar-border-color) !important;
    border-inline-end-width: 1px !important;
    width: 4px !important;
    background-color: transparent !important;
    margin-inline-start: -4px !important;
  }
}

/*------------------------- Edge-Frfox - browser.css -------------------------*/

/*
  MARK: Rounded corners (Rc)
*/

/* Since Firefox 120, when the bookmarks bar is set to only open on new tabs,
 * the bookmarks bar overlaps the #browser element. */

/* Change the element that shifts the browser content to the correct position. */
#main-window[BookmarksToolbarOverlapsBrowser] .newTabBrowserPanel,
#main-window[BookmarksToolbarOverlapsBrowser] #sidebar-box {
  padding-top: 0 !important;
  margin-top: 0 !important;
}

#main-window[BookmarksToolbarOverlapsBrowser] #browser {
  margin-top: var(--bookmarks-toolbar-overlapping-browser-height);
}

/* Make sure that the toolbars are not positioned in-front of the browser
   * element. */
#main-window[BookmarksToolbarOverlapsBrowser] #navigator-toolbox:not([style*="z-index"]) {
  z-index: auto !important;
}

/* Move the browser element in-front of the toolbars when on the new tab page. */
#main-window:not([BookmarksToolbarOverlapsBrowser]) #browser {
  z-index: 1 !important;
}

/*
  MARK: Rc Variables
*/
#main-window:not([chromehidden~="toolbar"]) {
  --uc-tweak-rounded-corners-padding: 4px;
  --uc-tweak-rounded-corners-radius: 8px;
  --uc-tweak-rounded-corners-shadow:
    0 -.8px 0 0 rgb(0 0 0 / 0.02),
    0 0.5px 1px 1px rgb(0 0 0 / 0.06),
    0 1px 1px rgb(0 0 0 / 0.1);
  --browser-frame-bgcolor: var(--toolbar-bgcolor, var(--lwt-accent-color));

  /* Different shadow for higher resolution displays. */
  @media (resolution > 1.8dppx) {
    --uc-tweak-rounded-corners-shadow:
      0 0 0.5px 0.5px rgb(0 0 0 / 0.06),
      0 0.5px 1.5px rgb(0 0 0 / 0.1);
  }

  --browser-frame-bgcolor: var(--lwt-accent-color);

  &:-moz-window-inactive {
    --browser-frame-bgcolor: var(--lwt-accent-color-inactive, var(--lwt-accent-color));
  }
}

/* Remove separator between toolbars and the browser window. */
#navigator-toolbox {
  border-bottom: none !important;
}

/* Disable rounded corners in fullscreen, only if the toolbar is hidden. */
:root[inFullscreen] #navigator-toolbox[style*="margin-top"]+#browser,
:root[inDOMFullscreen] #browser {
  --uc-tweak-rounded-corners-padding: 0;
  --uc-tweak-rounded-corners-radius: 0;
  --uc-tweak-rounded-corners-shadow: unset;
}

/*
    MARK: Rc Browser
*/
#tabbrowser-tabbox .browserStack {
  margin-inline: var(--uc-tweak-rounded-corners-padding) !important;
  margin-block-end: var(--uc-tweak-rounded-corners-padding) !important;
  border-radius: var(--uc-tweak-rounded-corners-radius) !important;
  box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;
  background-color: var(--tabpanel-background-color) !important;
  position: relative !important;

  /* Use pseudo element overlay to simulate rounded corners, similar to the
     * tab corners, fixes bug with backdrop-filter. */
  &::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    /* Draw toolbar background on the negative corner space, then draw the
       * same shadow from the browser window on top. */
    box-shadow:
      var(--uc-tweak-rounded-corners-shadow, 0 0 transparent),
      0 0 0 16px var(--browser-frame-bgcolor) !important;
    clip-path: inset(0);
    pointer-events: none;
  }
}

/* Prevent status panel corners and shadow from appearing outside the browser. */
#statuspanel {
  overflow: hidden;
}

/*
  MARK: Rc Sidebar
*/
:root {
  --tab-width: 240px;
}

#sidebar-box {
  margin-inline-start: var(--uc-tweak-rounded-corners-padding) !important;
  margin-block-end: var(--uc-tweak-rounded-corners-padding) !important;
  border-radius: var(--uc-tweak-rounded-corners-radius) !important;
  overflow: hidden !important;
  /*box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;*/

  /* 以下追加 */
  position: relative !important;
  overflow-x: hidden !important;
  box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;
  min-width: var(--tab-width) !important;
  max-width: var(--tab-width) !important;
  transition: all .1s ease;
  margin-left: calc(var(--tab-width) * -1) !important;
  z-index: 2;
  /* 追加終わり */

  &[positionend] {
    /*margin-inline-start: 0 !important;*/
    /*margin-inline-end: var(--uc-tweak-rounded-corners-padding) !important;*/
  }
}

/*
  MARK: Rc Devtools
*/

/* Devtools window when docked to the left or right. */
.devtools-toolbox-side-iframe {
  margin-block-end: var(--uc-tweak-rounded-corners-padding) !important;
  border-radius: var(--uc-tweak-rounded-corners-radius) !important;
  overflow: hidden !important;
  box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;

  /* Devtools window when docked to the left. */
  &:first-child {
    margin-inline-start: var(--uc-tweak-rounded-corners-padding) !important;
  }

  /* Devtools window when docked to the right. */
  &:last-child {
    margin-inline-end: var(--uc-tweak-rounded-corners-padding) !important;
  }
}

/* Devtools window when docked to the bottom. */
.devtools-toolbox-bottom-iframe {
  margin: var(--uc-tweak-rounded-corners-padding) !important;
  margin-block-start: 0 !important;
  border-radius: var(--uc-tweak-rounded-corners-radius) !important;
  overflow: hidden !important;
  box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;
}

/* Hide devtools splitter. */
.devtools-side-splitter,
.devtools-horizontal-splitter {
  background-color: transparent !important;
}

/* Responsive design mode. */
.browserContainer.responsive-mode {
  background-color: transparent !important;

  & .rdm-toolbar {
    margin-inline: var(--uc-tweak-rounded-corners-padding) !important;
    border-top-left-radius: var(--uc-tweak-rounded-corners-radius) !important;
    border-top-right-radius: var(--uc-tweak-rounded-corners-radius) !important;
    width: calc(100% - var(--uc-tweak-rounded-corners-padding) * 2) !important;
  }
}

/* Remove sidebar border when not in full screen. */
:not(:root[inFullscreen] #navigator-toolbox[style*="margin-top"])+#browser #sidebar-splitter {
  border-inline-width: 0 !important;
}

/* Apply colour to the frame around the browser window. */
#browser {
  background-color: var(--browser-frame-bgcolor);
}

/* Change colour of page when loading */
#tabbrowser-tabpanels {
  background-color: transparent !important;
}

/*------------------------- Edge-Frfox - tree.css -------------------------*/

/* Change height of tree items and add rounded corners */
treechildren::-moz-tree-row,
treecol:not([hideheader="true"]),
.tree-columnpicker-button {
  min-height: max(28px, 1.3em) !important;
  border-radius: 2px !important;
}

/* Change the background colour on hover */
@media not (prefers-contrast) {
  treechildren::-moz-tree-row(hover) {
    background-color: var(--toolbarbutton-hover-background) !important;
  }
}

/* Change the background colour when pressed */
treechildren::-moz-tree-row(selected) {
  background-color: var(--toolbarbutton-active-background) !important;
}

/* Change the background colour when focused */
treechildren::-moz-tree-row(selected, focus) {
  background-color: var(--button-primary-bgcolor) !important;
}

treechildren::-moz-tree-row(current, focus) {
  outline: var(--default-focusring);
  outline-color: var(--button-primary-bgcolor) !important;
  outline-offset: calc(-1 * var(--default-focusring-width));
}

treechildren::-moz-tree-image(selected),
treechildren::-moz-tree-twisty(selected),
treechildren::-moz-tree-cell-text(selected) {
  color: inherit !important;
}

treechildren::-moz-tree-image(selected, focus),
treechildren::-moz-tree-twisty(selected, focus),
treechildren::-moz-tree-cell-text(selected, focus) {
  color: var(--button-primary-color) !important;
}

/* Spacing between icon and label */
treechildren::-moz-tree-image {
  margin-inline-end: 8px !important;
}

/* Separator appearance */
treechildren::-moz-tree-separator {
  border-top: 1px solid var(--toolbarseparator-color) !important;
  border-bottom: none !important;
}

/* Change the colour of the drop feedback elements */
treechildren::-moz-tree-cell-text(primary, dropOn) {
  background-color: var(--button-primary-bgcolor) !important;
  color: var(--button-primary-color) !important;
}

treechildren::-moz-tree-drop-feedback {
  background-color: var(--toolbarbutton-icon-fill-attention) !important;
  border-radius: 2px !important;
}

/* Change the appearance for the expandable items */
treechildren::-moz-tree-twisty {
  padding-top: 0 !important;
  padding-inline: 4px !important;
  width: 16px !important;
  list-style-image: url("../icons/arrow-filled-right.svg") !important;
}

treechildren:-moz-locale-dir(rtl)::-moz-tree-twisty(closed) {
  list-style-image: url("../icons/arrow-filled-left.svg") !important;
}

treechildren::-moz-tree-twisty(open) {
  list-style-image: url("../icons/arrow-filled-down.svg") !important;
}

/* Change the identation of child items */
treechildren::-moz-tree-indentation {
  width: 16px !important;
}

/*------------------------- Edge-Frfox - tweaks.css -------------------------*/
/*
  MARK: Floating tabs
*/
:root:not([lwtheme]),
/* `--newtab-background-color-secondary used` to differentiate between a dark
   * private window and private window with the 'Dark' theme enabled.
   * May not be the most reliable method, but works for now up to FF 123. */
:root[privatebrowsingmode="temporary"]:where([style*="--lwt-accent-color: rgb(28, 27, 34)"]):not([style*="--newtab-background-color-secondary: rgb(66, 65, 77)"]) {
  --lwt-accent-color: light-dark(#f3f3f3, #202020) !important;
  --lwt-accent-color-inactive: unset !important;
  --toolbar-bgcolor: light-dark(#fff, #3F3F3F) !important;
  --lwt-tab-text: light-dark(#262626, #fff) !important;
  --chrome-content-separator-color: light-dark(#bfbfbf, #535353) !important;
  --lwt-tab-line-color: light-dark(transparent, rgb(255 255 255 / 0.06)) !important;
}

/* Uses :root body to avoid affecting other variables by changing
   * --toolbar-color. */
:root body {
  /* Use tabbar colours for better readability when using custom themes. */
  --toolbar-color: var(--lwt-text-color) !important;
  --toolbarbutton-icon-fill: var(--lwt-text-color) !important;

  &:-moz-window-inactive {
    --toolbar-color: var(--lwt-text-color-inactive, var(--lwt-text-color)) !important;
    --toolbarbutton-icon-fill: var(--lwt-text-color-inactive, var(--lwt-text-color)) !important;
  }
}

@media (-moz-gtk-csd-available) {
  :root:not([lwtheme]) {
    --toolbar-bgcolor: color-mix(in srgb, -moz-dialog 80%, #fff) !important;
    --toolbar-field-background-color: Field !important;
    --lwt-tab-text: -moz-dialogtext !important;
    --lwt-tab-line-color: rgb(255 255 255 / 0.06) !important;
    --lwt-accent-color: var(--toolbox-non-lwt-bgcolor) !important;

    &:-moz-window-inactive {
      --lwt-accent-color: var(--toolbox-non-lwt-bgcolor-inactive) !important;
    }
  }
}

/* Shadow for navbar and tabs */
:root,
:root .tabbrowser-tab {
  --uc-titlebar-shadow: none;
  --uc-tab-shadow-outline: rgb(0 0 0 / .11);
  --uc-tab-shadow: 0 2.5px 3px 1px rgb(0 0 0 / .08);

  & [brighttext],
  & [brighttext] .tabbrowser-tab {
    --uc-titlebar-shadow: none;
    --uc-tab-shadow-outline: transparent;
    --uc-tab-shadow: 0 2px 3px rgb(0 0 0 / .12);
  }

  & #TabsToolbar {
    --tab-border-radius: 8px !important;
  }
}

/* remove toolbar bg */
#nav-bar,
#PersonalToolbar {
  background-color: transparent !important;
}

/* invert bottom corner radius for tabs */
.tab-background {
  border-radius: var(--tab-border-radius) !important;
  outline-offset: 0px !important;

  &::before,
  &::after {
    display: none !important;
  }
}

.tab-background[selected] {
  border: 1px solid var(--lwt-tab-line-color, var(--lwt-tabs-border-color, transparent)) !important;
  outline: 1px solid var(--uc-tab-shadow-outline) !important;

  /* Fractional scaling adjustments (150%, 175%, etc.) */
  @media (1dppx < resolution < 2dppx) {
    outline-width: 1.5px !important;
  }
}

/* adjust spacing of area above tabs */
@media not (-moz-platform: macos) {
  :root[sizemode="maximized"] {
    --uc-tab-top-margin: 4px !important;
  }
}

:root:is([inFullscreen], :not([tabsintitlebar])) {
  --uc-tab-top-margin: 4px !important;
}

/* IMPORTANT: Adds padding and removes margin on top of tabs to allow user to
   * select it from the top edge of the window */
#tabbrowser-tabs {
  margin-top: calc(var(--uc-tab-top-margin) - 4px) !important;

  & .tabbrowser-tab,
  & #tabs-newtab-button {
    padding-top: 4px !important;
  }
}

#scrollbutton-up:not(.menupopup-scrollbutton),
#scrollbutton-down:not(.menupopup-scrollbutton) {

  &,
  &~spacer {
    margin-top: 4px !important;
  }
}

/* move tab shadow behind urlbar */
.tabbrowser-tab[visuallyselected="true"],
#nav-bar {
  z-index: 2 !important;
}

/* tab shadow adjustments */
.tabbrowser-tab {
  overflow-clip-margin: 8px !important;
}

#tabbrowser-arrowscrollbox>*,
#scrollbutton-up:not(.menupopup-scrollbutton),
#scrollbutton-up:not(.menupopup-scrollbutton)~spacer,
#scrollbutton-down:not(.menupopup-scrollbutton) {
  margin-bottom: 8px !important;
}

#tabbrowser-arrowscrollbox {
  margin-bottom: -8px !important;
}

/*------------------------- tweaks/hide-tabs-bar.css -------------------------*/
/*
  MARK: Hide tabs toolbar 
*/

/* Only hide the tabs toolbar if one of the following sidebar extensions is
   * active: Sidebery, Tree Style Tab, or Tab Center Reborn. */
:root:not([customizing]):has(#sidebar-box[sidebarcommand="_3c078156-979c-498b-8990-85f7987dd929_-sidebar-action"]:not([hidden])),
:root:not([customizing]):has(#sidebar-box[sidebarcommand="treestyletab_piro_sakura_ne_jp-sidebar-action"]:not([hidden])),
:root:not([customizing]):has(#sidebar-box[sidebarcommand="tabcenter-reborn_ariasuni-sidebar-action"]:not([hidden])) {
  /* Height of navbar, used for determining height and position of window controls */
  --uc-navbar-height: 38px;
  /* Drag space next to the window controls, allows you to move the window more easily */
  --uc-titlebar-drag-space: 40px;

  /* Hide the tabs */
  #TabsToolbar {
    visibility: collapse !important;
  }

  /* Fix issue with missing window controls. */
  &[tabsintitlebar] #titlebar,
  &[tabsintitlebar] #TabsToolbar {
    will-change: auto !important;
  }

  /* Add some padding to the top of the navbar */
  &[tabsintitlebar] #nav-bar {
    padding-top: var(--uc-tab-top-margin, 0) !important;
  }

  /*
    MARK: Window controls
  */
  #toolbar-menubar:not([autohide="false"])~#nav-bar {

    /* Firefox 133 added window controls to nav-bar. */
    .titlebar-buttonbox-container {
      display: flex !important;
      margin-top: calc(-1 * var(--uc-tab-top-margin, 0)) !important;

      @media (-moz-platform: macos) {
        margin-inline: 0 !important;

        .titlebar-buttonbox {
          margin-inline: calc((var(--uc-navbar-height) + var(--uc-tab-top-margin, 0px) - 14px) / 2) !important;
        }
      }
    }

    /* Space between window controls and navbar items. */
    .titlebar-spacer {
      width: max(calc(var(--uc-titlebar-drag-space, 0px) - var(--toolbar-start-end-padding, 0px)), 0px) !important;
    }

    /* Display left spacer (macOS and certain Linux configs). */
    @media (-moz-platform: macos),
    (-moz-gtk-csd-reversed-placement) {
      .titlebar-spacer[type*="pre"] {
        display: flex !important;
      }
    }

    /* Display right spacer (Windows and Linux). */
    @media (-moz-platform: windows),
    (-moz-gtk-csd-close-button) and (not (-moz-gtk-csd-reversed-placement)) {
      .titlebar-spacer[type*="post"] {
        display: flex !important;
      }
    }
  }

  /* Older versions of Firefox, move window controls from TabsToolbar. */
  &:not(:has(#nav-bar > .titlebar-buttonbox-container)) {

    /* Make sure window controls are removed in full screen mode. */
    &[inDOMFullscreen] #TabsToolbar .titlebar-buttonbox,
    &[inFullscreen] #navigator-toolbox[style*="margin-top"] #TabsToolbar .titlebar-buttonbox {
      visibility: collapse !important;
    }

    /* Disable the replacement window controls if tweak is enabled. */
    /*
          MARK: macOS styles
      */
    @media (-moz-platform: macos) {

      /* Offset navbar contents to make space for the window controls */
      &[tabsintitlebar]:not([inFullscreen]) #nav-bar {
        padding-left: calc(70px + var(--uc-titlebar-drag-space)) !important;

        /* Remove the padding from the side of the navbar */
        #nav-bar-customization-target> :is(toolbarbutton, toolbaritem):first-child {
          padding-inline-start: 0 !important;
        }
      }

      /* Positioning of the window controls */
      #TabsToolbar .titlebar-buttonbox-container {
        visibility: visible !important;
        position: fixed !important;
        height: calc(var(--uc-navbar-height) + var(--uc-tab-top-margin, 0px));
        margin: 0 !important;
        top: 0;
        left: 0;

        .titlebar-buttonbox {
          margin-inline: calc((var(--uc-navbar-height) + var(--uc-tab-top-margin, 0px) - 14px) / 2) !important;
        }
      }
    }

    /*
          MARK: Windows styles
      */
    @media (-moz-platform: windows) {

      /* Offset navbar contents to make space for the window controls */
      &:where([inFullscreen], [tabsintitlebar]) #nav-bar {
        padding-inline-end: calc(140px + var(--uc-titlebar-drag-space)) !important;

        /* Remove the padding from the side of the navbar */
        #PanelUI-menu-button {
          padding-inline-end: 0 !important;
        }
      }

      /* Positioning of the window controls */
      :where(#toolbar-menubar[inactive])+#TabsToolbar .titlebar-buttonbox {
        visibility: visible !important;
        position: fixed !important;
        top: 0;
        inset-inline-end: 0;
        height: calc(var(--uc-navbar-height) + var(--uc-tab-top-margin, 0)) !important;
        z-index: 100 !important;
        color: var(--toolbar-color) !important;
      }
    }

    /*
          MARK: Linux/GTK styles
      */
    @media (-moz-gtk-csd-minimize-button),
    (-moz-gtk-csd-maximize-button),
    (-moz-gtk-csd-close-button) {
      /* Width of single window control button. */
      --uc-window-control-btn: 34px;

      /* Navbar space reserved for one button. */
      --uc-window-controls-width: var(--uc-window-control-btn);

      /* Navbar space reserved for two buttons. */
      @media (-moz-gtk-csd-minimize-button) and (-moz-gtk-csd-maximize-button),
      (-moz-gtk-csd-minimize-button) and (-moz-gtk-csd-close-button),
      (-moz-gtk-csd-maximize-button) and (-moz-gtk-csd-close-button) {
        --uc-window-controls-width: calc(var(--uc-window-control-btn) * 2);
      }

      /* Navbar space reserved for three buttons. */
      @media (-moz-gtk-csd-minimize-button) and (-moz-gtk-csd-maximize-button) and (-moz-gtk-csd-close-button) {
        --uc-window-controls-width: calc(var(--uc-window-control-btn) * 3);
      }

      /* Offset navbar contents to make space for the window controls */
      &:where([inFullscreen], [tabsintitlebar]) #nav-bar {

        /* Window controls on the right. */
        @media not (-moz-gtk-csd-reversed-placement) {
          padding-inline-end: calc(var(--uc-window-controls-width, 0px) + var(--uc-titlebar-drag-space)) !important;

          /* Remove the padding from the side of the navbar */
          #PanelUI-menu-button {
            padding-inline-end: 0 !important;
          }
        }

        /* Window controls on the left. */
        @media (-moz-gtk-csd-reversed-placement) {
          padding-inline-start: calc(var(--uc-window-controls-width, 0px) + var(--uc-titlebar-drag-space)) !important;

          /* Remove the padding from the side of the navbar */
          #nav-bar-customization-target> :is(toolbarbutton, toolbaritem):first-child {
            padding-inline-start: 0 !important;
          }
        }
      }

      /* Positioning of the window controls */
      :where(#toolbar-menubar[inactive])+#TabsToolbar .titlebar-buttonbox {
        visibility: visible !important;
        position: fixed !important;
        top: 0;
        height: calc(var(--uc-navbar-height) + var(--uc-tab-top-margin, 0)) !important;
        z-index: 100 !important;
        inset-inline: auto 0;

        @media (-moz-gtk-csd-reversed-placement) {
          inset-inline: 0 auto !important;
        }
      }
    }
  }
}

/*
  MARK: Sidebar styles
*/
#sidebar-box:where([sidebarcommand="_3c078156-979c-498b-8990-85f7987dd929_-sidebar-action"]:not([hidden])),
#sidebar-box:where([sidebarcommand="treestyletab_piro_sakura_ne_jp-sidebar-action"]:not([hidden])),
#sidebar-box:where([sidebarcommand="tabcenter-reborn_ariasuni-sidebar-action"]:not([hidden])) {
  --sidebar-background-color: var(--toolbar-bgcolor) !important;
  --sidebar-text-color: var(--toolbar-color) !important;
  --sidebar-border-color: var(--chrome-content-separator-color) !important;
  position: relative !important;

  /* Floating tabs tweak uses the tab toolbar background instead. */
  --sidebar-background-color: var(--lwt-accent-color) !important;
  --sidebar-text-color: var(--lwt-text-color) !important;

  &:-moz-window-inactive {
    --sidebar-background-color: var(--lwt-accent-color-inactive) !important;
    --sidebar-text-color: var(--lwt-text-color-inactive) !important;
  }


  #sidebar-header {
    border-bottom: 0 !important;
    padding: 10px 4px 0 !important;
    overflow: hidden;
    position: relative;

    #sidebar-switcher-target,
    #sidebar-close {
      width: auto !important;
      height: 28px !important;
      padding: 0 8px !important;
      border: none !important;
      margin-inline: 0 !important;
    }

    #sidebar-spacer {
      min-width: 8px !important;
    }
  }

  /* Sidebar positioned on the left. */
  &:not([positionend]) {
    border-inline-end: 1px solid var(--sidebar-border-color);
    /* Use less padding on the side with the border. */
    padding-inline: 4px 3px;
  }

  /* Sidebar positioned on the right. */
  &[positionend] {
    border-inline-start: 1px solid var(--sidebar-border-color);
    /* Use less padding on the side with the border. */
    padding-inline: 3px 4px;
  }

  /* Rounded corners tweak optimisations. */
  /* Remove padding and border from sidebar. */
  &:not([positionend]),
  &[positionend] {
    border-inline: none;
    padding-inline: 0;
  }

  border-radius: 0 !important;
  /*  box-shadow: none !important;*/

  &:not([positionend]) {
    padding-inline-end: 3px;
  }

  &[positionend] {
    padding-inline-start: 3px;
  }

  #sidebar-header {
    padding-top: 4px !important;
  }
}